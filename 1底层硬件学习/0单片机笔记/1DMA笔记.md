# DMA学习笔记
## 1. 特点
1. DMA:直接存储器访问。如果不使用DMA的话，需要CPU先读取外设数据，再存放到存储器中，写数据也是一样道理。
2. DMA可以减少对CPU的使用，提高CPU利用率
3. 支持存储器到外设、外设到外设、存储器到存储器数据传输方向
4. 支持地址增量寻址，即传输完一次数据后，地址会增加

## 2. 设置流程
1. 使能DMA时钟，并循环等待DMA_SxCR的bit0置位，方可进行后续动作
2. DMA初始化
   1. 设置DMA数据流通道--可以由参考手册得知，具体外设对应的通道、DMA模块
   2. 设置外设基地址
   3. 设置内存基地址
   4. 设置数据传输方向--外设->内存/外设<-内存/内存->内存
   5. 设置一次传输数据量大小--若使用FIFO，该位无意义
   6. 设置外设地址是否递增
   7. 设置内存地址是否递增
   8. 设置外设数据长度单位(byte/half word/word)
   9. 设置内存数据长度单位(byte/half word/word)
   10. 设置DMA模式是否循环采集(DMA_Mode)
   11. 设置DMA优先级
   12. 设置是否使用FIFO
   13. 设置FIFO阈值--即使用FIFO的多少容量进行数据传输
   14. 配置突发传输配置
   15. 备注:以上外设、内存只是一个相对的概念，实际上外设可以配置成内存，需要配合2.2.4的参数设置才有意义
3.  使能外设的DMA发送
4.  使能DMA模块的数据流，启动传输
5.  查询DMA状态，判断当前DMA传输情况，是否传输完成，或者说DMA传输进度，发生的故障等等

