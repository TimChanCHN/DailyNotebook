# 内存学习笔记
## 1.内存控制器
> 此处的内存控制器使用了S3C2440，此处会同时讲解了SDRAM、NOR Flash、NAND Flash
1. CPU通过地址实现对不同的设备进行访问
2. 若CPU连接多个可寻址的芯片，通过芯片的片选信号来对芯片进行区分，对于S3C2440而言，不同的片选信号对应着不同区域的地址空间
3. SDRAM、NORFlash都使用着和CPU统一的寻址方式，而NANDFlash不能(因为NANDFlash的地址线有区别)
4. 不同位宽设备的连接
   1. 不管是什么位宽的内存芯片，每个地址只存储一个字节的数据
   2. 类比于下图，可以看得出，不同的内存设备和CPU的连接方法是有所区别。  
    ![CPU与不同位宽内存芯片的连接示意图](https://gitee.com/timchanchn/pictures/raw/master/daily/%E5%86%85%E5%AD%98/CPU%E4%B8%8E%E4%B8%8D%E5%90%8C%E4%BD%8D%E5%AE%BD%E8%8A%AF%E7%89%87%E7%9A%84%E8%BF%9E%E6%8E%A5%E7%A4%BA%E6%84%8F%E5%9B%BE.png)  
   3. 例子:以16bit内存芯片而言，CPU的Ax..A2A1和内存芯片的...A1A0连接，假如CPU想读取地址3的数据，CPU发给ROM的地址是0x11，但是ROM实际上收到的地址是0x01，因此ROM返回给CPU的数据是ROM地址为0x01的16bit数据，此时就体现了内存控制器的作用:通过A0=1,提取了ROM上传的16bit数据的高字节发送给CPU。其他位宽的芯片同样道理  
    ![多款位宽的内存芯片上报一个字节数据示意图]()  
    ![多款位宽的内存芯片上报一个字数据示意图](https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1602613275979&di=fc61bacae6f0a27d5b13ae68e88aa515&imgtype=0&src=http%3A%2F%2Fn.sinaimg.cn%2Fsports%2Ftransform%2F283%2Fw650h433%2F20180413%2FGxf8-fytnfyp4287321.jpg)  
5. 内存控制器时序设置
   1. 在芯片的内存控制器中，可以获得到读写时序图
   2. 在对应的内存芯片中，通过查找读写时序图以及对应的时间参数
   3. 匹配上面两点，把对应的时间参数写入内存控制器的控制寄存器，即可以完成对应的读写命令

6. 内存控制器操作SDRAM
   1. 初始化
      1. 发出片选信号
      2. 确定块参数、行参数、列参数
      3. 配置基本时序信息
   2. 读写
      1. 通过原理图确定出SDRAM的寻址范围，直接对该地址进行读写即可(因为SDRAM在CPU的统一编址下，不需要发指令读写)

## 2.


